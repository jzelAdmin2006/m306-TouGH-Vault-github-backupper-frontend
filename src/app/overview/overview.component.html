<div class="table-container">
  <table>
    <tr *ngFor="let repo of filteredRepos | repoOrdering">
      <td [attr.colspan]="columnHeaders.length">
        <div class="repo-details">
          <span class="repo-name">{{ repo.name }}</span> <!-- TODO add hyperlink to repo -->
          <div [ngSwitch]="repo | protectionState" class="action-buttons">
            <button (click)="protect(repo)" *ngSwitchCase="'Unprotected'" class="action-button" mat-flat-button>
              Protect
            </button>
            <!-- TODO extract buttons to component to disable them for a few seconds after they have been clicked -->
            <button (click)="unprotect(repo)" *ngSwitchCase="'Protected'" class="action-button" mat-flat-button>
              Unprotect
            </button>
            <button (click)="unprotect(repo)" *ngSwitchCase="'Partially protected'" class="action-button"
                    mat-flat-button>
              Unprotect
            </button>
            <button (click)="protect(repo)" *ngSwitchCase="'Partially protected'" class="action-button" mat-flat-button>
              Update backup
            </button>
            <button (click)="delete(repo)" *ngSwitchCase="'Rescued'" class="action-button dangerous-button"
                    mat-flat-button>
              Delete forever
            </button> <!-- TODO add warning if user is sure -->
            <button (click)="restore(repo)" *ngSwitchCase="'Rescued'" class="action-button" mat-flat-button>
              Restore
            </button>
          </div>
        </div>
      </td>
    </tr>
    <tr *ngIf="filteredRepos.length === 0 && repos.length > 0">
      <td [attr.colspan]="columnHeaders.length" class="not-found-message">
        No repositories found with this filter
      </td>
    </tr>
    <tr *ngIf="repos.length === 0">
      <td [attr.colspan]="columnHeaders.length" class="not-found-message">
        No repositories found (yet ðŸ¤”?)
      </td>
    </tr>
  </table>
</div>
